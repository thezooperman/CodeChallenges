import bisect


def findClosestElements(arr, k, x):
    """
    :type arr: List[int]
    :type k: int
    :type x: int
    :rtype: List[int]
    """
    if arr is None or len(arr) == 0:
        return []
    if len(arr) == 1:
        return [arr[0]] if x in arr else [0]
    # if x < 0:
    #     return arr[:k]
    x_index = None

    x_index = bisect.bisect(arr, x)

    if x_index is None:
        return []

    upper_bound = min(len(arr) - 1, x_index + k - 1)
    lower_bound = max(0, x_index - k - 1)

    while upper_bound - lower_bound > k - 1:
        if lower_bound < 0 or (x - arr[lower_bound]) <= (arr[upper_bound] - x):
            upper_bound -= 1
        elif upper_bound > len(arr) - 1 or\
                (x - arr[lower_bound]) > (arr[upper_bound] - x):
            lower_bound += 1

    return arr[lower_bound: upper_bound + 1]


if __name__ == '__main__':
    print(findClosestElements([1, 1, 2, 3, 3, 3, 4, 6, 8, 8], 6, 1))
    print(findClosestElements([1, 2], 1, 1))
    print(findClosestElements([1, 2, 3, 4, 5], 4, 3))
    print(findClosestElements([0, 1, 1, 1, 2, 3, 6, 7, 8, 9], 9, 4))

    arr = [-9994,-9946,-9941,-9929,-9885,-9858,-9850,-9810,-9807,-9804,-9784,-9776,-9737,-9720,-9708,-9670,-9660,-9652,-9649,-9618,-9611,-9597,-9588,-9567,-9543,-9528,-9527,-9524,-9518,-9494,-9482,-9466,-9449,-9433,-9412,-9397,-9388,-9369,-9369,-9328,-9305,-9291,-9252,-9247,-9233,-9207,-9199,-9197,-9155,-9139,-9137,-9133,-9112,-9105,-9084,-9047,-8928,-8921,-8863,-8863,-8833,-8829,-8825,-8801,-8795,-8792,-8764,-8720,-8709,-8639,-8607,-8591,-8578,-8546,-8458,-8443,-8429,-8406,-8387,-8378,-8359,-8337,-8284,-8282,-8263,-8261,-8245,-8217,-8186,-8157,-8125,-8109,-8103,-8102,-8100,-8087,-8056,-8041,-8031,-8027,-8021,-7909,-7901,-7897,-7874,-7820,-7819,-7794,-7782,-7766,-7730,-7712,-7679,-7667,-7643,-7633,-7620,-7608,-7603,-7592,-7559,-7555,-7536,-7481,-7439,-7411,-7407,-7387,-7366,-7339,-7324,-7323,-7316,-7277,-7242,-7233,-7229,-7229,-7214,-7201,-7197,-7191,-7189,-7175,-7104,-7103,-7080,-7078,-7068,-7059,-6989,-6958,-6956,-6929,-6920,-6919,-6897,-6877,-6842,-6841,-6815,-6802,-6798,-6782,-6702,-6687,-6675,-6627,-6626,-6623,-6616,-6608,-6589,-6576,-6557,-6540,-6519,-6517,-6471,-6454,-6442,-6424,-6424,-6376,-6374,-6317,-6316,-6315,-6310,-6308,-6253,-6251,-6243,-6237,-6232,-6230,-6205,-6178,-6176,-6172,-6162,-6149,-6136,-6107,-6092,-6055,-6052,-6020,-6016,-6015,-5982,-5982,-5977,-5975,-5949,-5926,-5923,-5902,-5881,-5799,-5796,-5782,-5775,-5773,-5735,-5725,-5722,-5715,-5684,-5673,-5665,-5648,-5645,-5596,-5548,-5547,-5534,-5496,-5426,-5392,-5387,-5381,-5351,-5342,-5334,-5334,-5310,-5272,-5258,-5239,-5236,-5213,-5150,-5137,-5125,-5115,-5108,-5046,-5045,-5041,-4991,-4990,-4982,-4948,-4935,-4928,-4891,-4883,-4876,-4866,-4836,-4834,-4822,-4804,-4803,-4755,-4730,-4714,-4708,-4668,-4648,-4646,-4638,-4589,-4551,-4543,-4526,-4493,-4473,-4443,-4417,-4387,-4368,-4304,-4304,-4304,-4261,-4256,-4238,-4236,-4216,-4203,-4200,-4190,-4189,-4159,-4113,-4083,-4074,-4046,-4017,-4017,-3983,-3977,-3971,-3965,-3949,-3948,-3939,-3889,-3880,-3852,-3842,-3766,-3757,-3750,-3746,-3715,-3703,-3699,-3688,-3663,-3631,-3627,-3613,-3593,-3588,-3585,-3528,-3528,-3525,-3451,-3423,-3421,-3414,-3393,-3378,-3375,-3360,-3313,-3299,-3282,-3275,-3271,-3267,-3264,-3233,-3227,-3220,-3197,-3161,-3116,-3114,-3113,-3112,-3107,-3092,-3086,-3085,-3069,-3066,-3062,-3062,-3055,-3027,-3025,-3015,-3015,-2991,-2939,-2927,-2924,-2922,-2891,-2883,-2858,-2792,-2782,-2779,-2749,-2710,-2698,-2693,-2675,-2674,-2647,-2625,-2586,-2582,-2544,-2508,-2502,-2499,-2497,-2482,-2481,-2467,-2450,-2428,-2418,-2413,-2407,-2403,-2376,-2326,-2326,-2285,-2283,-2275,-2275,-2269,-2241,-2236,-2235,-2233,-2212,-2208,-2193,-2185,-2155,-2113,-2113,-2088,-2085,-2064,-2044,-2042,-2042,-2004,-1995,-1963,-1953,-1902,-1887,-1886,-1855,-1836,-1833,-1826,-1761,-1705,-1669,-1660,-1557,-1501,-1466,-1419,-1229,-1225,-1219,-1189,-1176,-1163,-1107,-1106,-1092,-1082,-1073,-1070,-1067,-1059,-1049,-1039,-1035,-1005,-975,-934,-921,-916,-876,-841,-840,-822,-791,-778,-743,-738,-731,-701,-686,-676,-651,-630,-586,-578,-571,-569,-568,-550,-533,-515,-481,-470,-464,-452,-441,-426,-391,-384,-377,-372,-318,-308,-303,-286,-276,-247,-237,-233,-215,-202,-192,-148,-117,-110,-84,-62,-17,-8,-7,42,43,56,100,153,162,185,192,203,246,263,301,306,307,385,394,408,426,435,482,508,513,602,653,676,685,711,793,796,798,806,872,934,935,951,959,971,998,1002,1030,1035,1048,1109,1140,1152,1153,1159,1160,1176,1178,1187,1203,1240,1241,1258,1267,1273,1275,1297,1316,1339,1357,1367,1380,1424,1460,1501,1613,1657,1682,1721,1746,1784,1809,1829,1837,1859,1902,1903,1921,1937,1957,1963,1971,1977,2001,2037,2052,2057,2074,2095,2096,2149,2152,2166,2195,2198,2199,2207,2218,2235,2242,2263,2310,2331,2332,2374,2396,2408,2453,2472,2487,2494,2495,2498,2503,2607,2627,2641,2648,2665,2744,2772,2805,2809,2816,2821,2869,2871,2915,2922,2932,2961,2963,2996,2999,3000,3004,3019,3026,3036,3048,3049,3143,3162,3162,3178,3189,3198,3223,3228,3280,3284,3334,3385,3401,3407,3415,3439,3490,3506,3520,3551,3568,3613,3643,3687,3797,3823,3830,3837,3850,3894,3896,3917,3918,3925,3929,3932,3939,3943,3953,3974,3981,4031,4035,4044,4067,4098,4211,4252,4357,4360,4391,4392,4404,4434,4468,4508,4520,4538,4542,4557,4577,4602,4689,4708,4730,4735,4743,4759,4779,4814,4868,4869,4881,4902,4930,4936,4980,5123,5147,5154,5155,5160,5176,5194,5269,5272,5278,5299,5326,5332,5342,5370,5371,5374,5472,5472,5495,5519,5556,5595,5598,5607,5660,5705,5737,5758,5790,5820,5827,5850,5863,5877,5935,5937,5947,5959,5962,5968,6025,6034,6045,6065,6068,6074,6087,6092,6095,6102,6136,6137,6167,6184,6227,6236,6260,6275,6288,6307,6344,6356,6356,6377,6388,6422,6426,6429,6433,6477,6490,6492,6497,6508,6518,6529,6532,6535,6562,6575,6597,6599,6646,6647,6658,6673,6689,6690,6701,6703,6763,6777,6803,6816,6895,6903,6943,6967,7024,7026,7072,7089,7093,7125,7149,7162,7179,7235,7317,7381,7393,7403,7434,7456,7478,7501,7532,7572,7606,7650,7654,7684,7684,7686,7689,7694,7712,7713,7732,7765,7778,7790,7791,7809,7813,7840,7856,7862,7862,7867,7895,7932,7952,7969,7979,7990,7992,8031,8075,8107,8122,8140,8156,8163,8181,8185,8196,8212,8234,8255,8259,8264,8278,8295,8315,8316,8323,8324,8341,8352,8355,8419,8419,8420,8425,8427,8448,8451,8469,8475,8478,8491,8515,8519,8520,8554,8571,8609,8649,8652,8679,8681,8703,8727,8745,8801,8802,8818,8875,8904,8945,8950,8957,8970,8972,8980,8991,9005,9015,9083,9158,9165,9213,9219,9224,9226,9245,9251,9272,9296,9310,9320,9350,9363,9423,9425,9510,9520,9549,9601,9609,9613,9635,9687,9699,9699,9700,9709,9717,9781,9802,9846,9870,9875,9899,9925,9932,9941,9969]
    k = 16
    x = -7580
    print(findClosestElements(arr, k, x))
